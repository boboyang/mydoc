pS mysql

#start server
sudo /usr/bin/mysqld_safe &

#root 
mysql -h localhost -uroot -p
#no passwd at first

#set passwd
sudo mysqladmin -uroot -p password XXX

# recover passwd
sudo -i
/etc/rc.d/mysqld stop
mysqld_safe --skip-grant-tables&
mysql -u root
mysql> use mysql;
mysql> update user set password=PASSWORD("NEW-ROOT-PASSWORD") where User='root';
mysql> flush privileges;
mysql> quit
/etc/rc.d/mysqld stop
/etc/rc.d/mysqld start
mysql -u root -p


#mysql cmd

\h
\h show

select version(),current_date;
select user();

#db
show databases;
use test;   # use test db
create DATABASE mydb;
drop database mydb;

#table
SHOW TABLES;
create TABLE mytable(
<name> <type>...,
...
);
describe mytable;
drop table mytable;
alter mytable rename mytable2;
#add field
alter mytable add xxx int(4) default '0';

#add data
insert into mytable values('',...);
#load data
load data local INFILE 'xxx.txt' into table mytable;

# query cache
mysql> show variables like '%query_cache%';
mysql> show status like '%qcache%';

#backup
mysqldump -h localhost -uroot -p mydb>mydb.sql
#restore
mysqladmin -uroot -p create mydb
mysqldump  -uroot -p mydb<mydb.sql

#conf
/etc/mysql/my.cnf
port = 3306
server-id = 1
log-bin=mysql-bin
datadir=/var/lib/mysql

#master-slave
    aim: scaling read, failover recovery
    work:
        binary log
    setup:
        mysql> GRANT REPLICATION SLAVE ON *.* TO 'slave'@'172.18.195.213' identified by 'slavepwd',;


#centOS:
yum install  mysql-server
/etc/init.d/mysqld start
netstat -antp |grep 3306

mysql>
    show master status;
