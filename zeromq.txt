If a receiver (SUB, PULL, REQ) side of a socket sets an identity, then the sending (PUB, PUSH, PULL) side will buffer messages when they aren't connected up to the HWM. 

To turn a transient socket into a durable one you give it an explicit identity. 
All Ã˜MQ sockets have identities but by default they are generated 'unique universal identifiers' (UUIDs) that the peer uses to recall who it's talking to.

usage:
zmq_setsockopt (socket, ZMQ_IDENTITY, "Lucy", 4);


Idempotent Services

Titannic pattern (Disconnected Reliability)
write messages to disk to ensure they never get lost

key: 
1. client id + unique msg number (difficult to manage many clients)
2. UUID
before reply, server check key if sending twice

TSP  "Titanic Service Protocol"
titanic.request - store a request message, return a UUID for the request.
titanic.reply - fetch a reply, if available, for a given request UUID.
titanic.close - confirm that a reply has been stored and processed.


